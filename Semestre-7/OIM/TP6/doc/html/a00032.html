<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>M1 Informatique - OIM - mini raytracer: Référence du fichier main.cpp</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">M1 Informatique - OIM - mini raytracer
   &#160;<span id="projectnumber">2012-2013</span>
   </div>
   <div id="projectbrief">Interface de programmation pour un raytracer minimal</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Généré par Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&#160;associées</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Membres&#160;de&#160;fichier</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('a00032.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier main.cpp</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00044_source.html">solidesplaton.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Graphe des dépendances par inclusion de main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="a00078.png" border="0" usemap="#main_8cpp" alt=""/></div>
<map name="main_8cpp" id="main_8cpp">
<area shape="rect" id="node3" href="a00044.html" title="solidesplaton.h" alt="" coords="216,83,325,111"/><area shape="rect" id="node5" href="a00041.html" title="raytracing.h" alt="" coords="225,161,316,189"/></map>
</div>
</div>
<p><a href="a00032_source.html">Aller au code source de ce fichier.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00004.html">Color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00032.html#a9f1daa433c3bc9891cb1202a4e89080f">compute_direct_lighting</a> (<a class="el" href="a00018.html">Ray</a> ray_, <a class="el" href="a00010.html">Isect</a> isect_)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00004.html">Color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray</a> (<a class="el" href="a00018.html">Ray</a> ray_)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00032.html#ab1d1ac9ba4ad1639618cfd7613fee95f">compute_image</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00032.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
</table>
<hr/><h2>Documentation des fonctions</h2>
<a class="anchor" id="a9f1daa433c3bc9891cb1202a4e89080f"></a><!-- doxytag: member="main.cpp::compute_direct_lighting" ref="a9f1daa433c3bc9891cb1202a4e89080f" args="(Ray ray_, Isect isect_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html">Color</a> compute_direct_lighting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html">Ray</a>&#160;</td>
          <td class="paramname"><em>ray_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00010.html">Isect</a>&#160;</td>
          <td class="paramname"><em>isect_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="a00057.html#_todo000001">A faire:</a></b></dt><dd>: compute here direct lighting</dd></dl>
<p>Le rôle de la fonction <a class="el" href="a00032.html#a9f1daa433c3bc9891cb1202a4e89080f">compute_direct_lighting()</a> est de calculer la somme, pour chaque source de lumière de la scène, de l'éclairage élémentaire dû à cette source. Cette somme est calculée en ajoutant à une couleur noire (triplet <b>RGB</b> [0, 0, 0], élément neutre de l'addition des couleurs), la valeur de l'éclairage direct lié à chaque source de la scène. La fonction <a class="el" href="a00032.html#a9f1daa433c3bc9891cb1202a4e89080f">compute_direct_lighting()</a> utilise pour cela les fonctions des modules <a class="el" href="a00052.html">Scene definition API</a> (pour accéder à l'ensemble des sources lumineuses de la scène), <a class="el" href="a00053.html">Ray management API</a> (pour calculer la visibilité entre un point et une source de lumière) et <a class="el" href="a00055.html">Lighting computation API</a> (pour calculer l'éclairage direct).</p>

<p>Définition à la ligne <a class="el" href="a00032_source.html#l00007">7</a> du fichier <a class="el" href="a00032_source.html">main.cpp</a>.</p>

<p>Références <a class="el" href="a00040_source.html#l00361">init_color()</a>.</p>

<p><div class="dynheader">
Voici le graphe d'appel pour cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="a00032_a9f1daa433c3bc9891cb1202a4e89080f_cgraph.png" border="0" usemap="#a00032_a9f1daa433c3bc9891cb1202a4e89080f_cgraph" alt=""/></div>
<map name="a00032_a9f1daa433c3bc9891cb1202a4e89080f_cgraph" id="a00032_a9f1daa433c3bc9891cb1202a4e89080f_cgraph">
<area shape="rect" id="node3" href="a00054.html#ga8442f299f5a4fad5e1ffe8b54ce3a852" title="init a color" alt="" coords="216,5,291,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab1d1ac9ba4ad1639618cfd7613fee95f"></a><!-- doxytag: member="main.cpp::compute_image" ref="ab1d1ac9ba4ad1639618cfd7613fee95f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_image </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="a00057.html#_todo000003">A faire:</a></b></dt><dd>: main rendering loop</dd></dl>
<p>Le calcul d'une image de synthèse consiste à calculer une couleur pour tous les pixels d'une image en fonction d'une modélisation d'un capteur virtuel. Ce capteur est ici représenté par une <a class="el" href="a00003.html" title="Viewpoint management.">Camera</a> qui permet, à partir des coordonnées (x,y) d'un pixel d'une image, de créer le rayon passant par ce pixel. La manière dont est créé ce rayon dépend de la <a class="el" href="a00003.html" title="Viewpoint management.">Camera</a>. La scène étant crée avec une caméra par défaut de type <b>pinhole</b>, la fonction <a class="el" href="a00053.html#ga8cb8aef586b50a39b449ebb804acee60" title="compute the ray for the given pixel">camera_ray()</a> devra être utilisée afin de créer le rayon primaire. Ce rayon est ensuite tracé dans la scène (par la fonction <a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray()</a>) et la couleur calculée à l'aide de ce rayon doit être stockée sur le pixel (x,y).</p>

<p>Définition à la ligne <a class="el" href="a00032_source.html#l00068">68</a> du fichier <a class="el" href="a00032_source.html">main.cpp</a>.</p>

<p>Référencé par <a class="el" href="a00032_source.html#l00091">main()</a>.</p>

<p><div class="dynheader">
Voici le graphe des appelants de cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="a00032_ab1d1ac9ba4ad1639618cfd7613fee95f_icgraph.png" border="0" usemap="#a00032_ab1d1ac9ba4ad1639618cfd7613fee95f_icgraph" alt=""/></div>
<map name="a00032_ab1d1ac9ba4ad1639618cfd7613fee95f_icgraph" id="a00032_ab1d1ac9ba4ad1639618cfd7613fee95f_icgraph">
<area shape="rect" id="node3" href="a00032.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title="main" alt="" coords="171,5,221,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a><!-- doxytag: member="main.cpp::main" ref="ae66f6b31b5ad750f1fe042a706a4e3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Définition à la ligne <a class="el" href="a00032_source.html#l00091">91</a> du fichier <a class="el" href="a00032_source.html">main.cpp</a>.</p>

<p>Références <a class="el" href="a00032_source.html#l00068">compute_image()</a>, <a class="el" href="a00040_source.html#l00204">make_default_scene()</a>, et <a class="el" href="a00040_source.html#l00478">save_image()</a>.</p>

<p><div class="dynheader">
Voici le graphe d'appel pour cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="a00032_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph.png" border="0" usemap="#a00032_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" alt=""/></div>
<map name="a00032_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" id="a00032_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph">
<area shape="rect" id="node3" href="a00032.html#ab1d1ac9ba4ad1639618cfd7613fee95f" title="compute_image" alt="" coords="118,213,234,241"/><area shape="rect" id="node5" href="a00052.html#ga5102ec4e0cd297fb1e649f5dde3bd029" title="to initialize the scene with the default one." alt="" coords="104,265,248,293"/><area shape="rect" id="node33" href="a00056.html#ga7952790dd850900c80616789d264b6b8" title="to save the image to a file" alt="" coords="129,421,223,449"/><area shape="rect" id="node7" href="a00052.html#gad67f595be55be0bc50b4ec08a9c74192" title="to set the parameters of the camera" alt="" coords="332,5,423,33"/><area shape="rect" id="node11" href="a00052.html#gad720b183f0a7c5b1d366a86fae48ff5e" title="to create a matte material" alt="" coords="313,57,442,85"/><area shape="rect" id="node13" href="a00052.html#ga5e9b1752bc3635d8e03aeedce96f1378" title="to create a plastic material" alt="" coords="311,109,444,137"/><area shape="rect" id="node15" href="a00052.html#ga7e84d93db3d16480aa51e9d9cc16d843" title="to create a metal&#45;like material" alt="" coords="313,161,441,189"/><area shape="rect" id="node17" href="a00052.html#ga064ee1f6da1924df4e37334c456ea18f" title="to create a glass&#45;like material" alt="" coords="314,213,441,241"/><area shape="rect" id="node19" href="a00052.html#ga2da051b943f32009496f94737261c248" title="to create a sphere" alt="" coords="324,265,431,293"/><area shape="rect" id="node21" href="a00052.html#gaf8b0ecdd64116491706ebede06c13b54" title="to create a plane" alt="" coords="328,317,427,345"/><area shape="rect" id="node23" href="a00052.html#gabd60bd9dfe9afb36b127decf9145287d" title="to create a cylinder" alt="" coords="321,369,433,397"/><area shape="rect" id="node25" href="a00052.html#gadf3f8ea1c8bf943db640af01230ed0f7" title="to add a new object to the scene, from its geometry and its material" alt="" coords="334,421,421,449"/><area shape="rect" id="node29" href="a00052.html#ga7338897b0e82076338fb7dd7cadeaddc" title="to add a light to the scene" alt="" coords="340,473,415,501"/><area shape="rect" id="node9" href="a00019.html#a92e1b2344129de2618f3b5f1ed22dd5e" title="Scene::set_camera" alt="" coords="512,5,648,33"/><area shape="rect" id="node27" href="a00019.html#aab20b59647f0f9ba5cc40e5943377a87" title="Scene::add_primitive" alt="" coords="507,421,653,449"/><area shape="rect" id="node31" href="a00019.html#a6403f0a1e1cb777d4b335a3eb093979d" title="Scene::add_light" alt="" coords="520,473,640,501"/><area shape="rect" id="node35" href="a00009.html#a4494a1ac16eb45ef862806694c8aa3d3" title="Image::write_to_exr_file" alt="" coords="296,525,459,553"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0bb032ac4d4d1b49ce014a54feed764a"></a><!-- doxytag: member="main.cpp::trace_ray" ref="a0bb032ac4d4d1b49ce014a54feed764a" args="(Ray ray_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html">Color</a> trace_ray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html">Ray</a>&#160;</td>
          <td class="paramname"><em>ray_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="a00057.html#_todo000002">A faire:</a></b></dt><dd>: recursive raytracing</dd></dl>
<p>La fonction <a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray()</a> renvoie une couleur obtenue par la somme de l'éclairage direct (couleur calculée par la fonction <a class="el" href="a00032.html#a9f1daa433c3bc9891cb1202a4e89080f">compute_direct_lighting()</a>) et des couleurs provenant des reflets et transparences éventuels aux points d'intersection. Dans la première partie du TP, seul l'éclairage direct sera calculé. Dans la seconde partie, les reflets et transparences seront rajoutés.</p>
<p>Pour la première étape, la fonction <a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray()</a> ne calculant que les rayons primaires, l'intersection entre le rayon et la scène doit être calculée (fonction <a class="el" href="a00053.html#gaa971dcbc0062c359e8464f84662b0bd4" title="intersect a given ray with the scene.">intersect_scene()</a> du module <a class="el" href="a00053.html">Ray management API</a>). S'il n'y a pas d'intersection, une couleur blanche (triplet RGB [1, 1, 1], élément neutre de la multiplication des couleurs) devra être retournée. S'il y a une intersection, la couleur retournée sera la couleur résultante de l'éclairage direct du point d'intersection par les sources lumineuses de la scène et calculée par la fonction <a class="el" href="a00032.html#a9f1daa433c3bc9891cb1202a4e89080f">compute_direct_lighting()</a> à écrire dans la suite.</p>
<p>Pour la deuxième étape, à partir des fonctions définies dans le module <a class="el" href="a00053.html">Ray management API</a> et permettant d'accéder aux informations de profondeur et d'importance sur le rayon, définir un cas d'arêt dela récursivité et renvoyer si ce cas est vérifié la couleur résultante de l'éclairage direct. Si la récursivité n'est pas terminée, en utilisant les fonctions définies dans le module <a class="el" href="a00055.html">Lighting computation API</a>, calculer la couleur réfléchie. Pour cela, il faut tester si le matériau est réflechissant et, si c'est le cas, calculer le rayon réfléchi et le coefficient de réflexion (une couleur). La couleur calculée en lançant le rayon réfléchi devra alors être multipliée par ce coefficient avant d'être ajoutée à la couleur renvoyée par <a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray()</a>.</p>
<p>Pour la troisème étape et de façon très similaire à la réflexion, utiliser les fonctions définies dans le module <a class="el" href="a00055.html">Lighting computation API</a> pour calculer la couleur réfractée. Pour cela, il faut tester si le matériau est transparent et, si c'est le cas, calculer le rayon réfracté et le coefficient de transparence (une couleur). La couleur calculée en lançant le rayon réfracté devra alors être multipliée par ce coefficient avant d'être ajoutée à la couleur renvoyée par <a class="el" href="a00032.html#a0bb032ac4d4d1b49ce014a54feed764a">trace_ray()</a>.</p>

<p>Définition à la ligne <a class="el" href="a00032_source.html#l00030">30</a> du fichier <a class="el" href="a00032_source.html">main.cpp</a>.</p>

<p>Références <a class="el" href="a00040_source.html#l00361">init_color()</a>.</p>

<p><div class="dynheader">
Voici le graphe d'appel pour cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="a00032_a0bb032ac4d4d1b49ce014a54feed764a_cgraph.png" border="0" usemap="#a00032_a0bb032ac4d4d1b49ce014a54feed764a_cgraph" alt=""/></div>
<map name="a00032_a0bb032ac4d4d1b49ce014a54feed764a_cgraph" id="a00032_a0bb032ac4d4d1b49ce014a54feed764a_cgraph">
<area shape="rect" id="node3" href="a00054.html#ga8442f299f5a4fad5e1ffe8b54ce3a852" title="init a color" alt="" coords="131,5,205,33"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="a00032.html">main.cpp</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Énumérations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Valeurs énumérées</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Généré le Samedi Octobre 20 2012 11:25:22 pour M1 Informatique - OIM - mini raytracer par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
